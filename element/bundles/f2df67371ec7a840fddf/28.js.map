{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ImportE2eKeysDialog.tsx","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.ts"],"names":["Phase","ImportE2eKeysDialog","React","Component","constructor","props","super","createRef","ev","files","this","file","current","setState","enableSubmit","passphrase","value","length","preventDefault","startImport","onFinished","state","phase","Edit","errStr","componentWillUnmount","unmounted","Importing","Promise","resolve","reject","reader","FileReader","onload","e","target","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","matrixClient","importRoomKeys","JSON","parse","catch","logger","error","msg","friendlyText","_t","render","disableForm","className","title","onSubmit","onFormSubmit","htmlFor","ref","id","type","autoFocus","onChange","onFormChange","disabled","size","onClick","onCancelClick","subtleCrypto","window","crypto","subtle","webkitSubtle","friendlyError","message","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","Error","line","slice","trim","HEADER_LINE","dataStart","undefined","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","getTime","aesProm","hmacProm","all","String","fromCharCode","apply","btoa"],"mappings":"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","file":"bundles/f2df67371ec7a840fddf/28.js","sourceRoot":""}